<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Test prototype_ext.js</title>
<script language="JavaScript" type="text/javascript" src="../../lib/jsUnitCore.js"></script>
<script language="JavaScript" type="text/javascript" src="../../lib/test_helper.js"></script>
<script language="JavaScript" type="text/javascript" src="../../lib/prototype.js"></script>
<script language="JavaScript" type="text/javascript" src="../../src/prototype_ext.js"></script>
</head>
<body>
<h1>prototype_ext.js Tests</h1>
<p>This page tests loading data documents asynchronously.  To see them, take a look at the source.</p>

<div id="tableContainer" class="tables">
    <table id="table1" class="matrix">
        <thead id="table1_head">
            <tr id="table1_head_row">
                <th id="table1_head_id" class="col_id">ID</th>
                <th id="table1_head_name" class="col_name">名前</th>
                <th id="table1_head_url" class="col_url">URL</th>
            </tr>
        </thead>
    	<tbody id="table1_body">
    		<tr id="table1_row1">
    		  <td id="table1_row1_id" class="col_id">1</td>
    		  <td id="table1_row1_name" class="col_name">The Serverside.com</td>
    		  <td id="table1_row1_url" class="col_url">http://www.theserverside.com/</td>
    		</tr>
    		<tr id="table1_row2">
    		  <td id="table1_row2_id" class="col_id">2</td>
    		  <td id="table1_row2_name" class="col_name">Eclipse.org</td>
    		  <td id="table1_row2_url" class="col_url">http://www.eclipse.org/</td>
    		</tr>
    		<tr id="table1_row3">
    		  <td id="table1_row3_id" class="col_id">3</td>
    		  <td id="table1_row3_name" class="col_name">MSDN</td>
    		  <td id="table1_row3_url" class="col_url">http://msdn.microsoft.com/</td>
    		</tr>
    		<tr id="table1_row4">
    		  <td id="table1_row4_id" class="col_id">4</td>
    		  <td id="table1_row4_name" class="col_name">IBM developerWorks</td>
    		  <td id="table1_row4_url" class="col_url">http://www-06.ibm.com/jp/developerworks/</td>
    		</tr>
    		<tr id="table1_row5">
    		  <td id="table1_row5_id" class="col_id">5</td>
    		  <td id="table1_row5_name" class="col_name">codehaus</td>
    		  <td id="table1_row5_url" class="col_url">http://codehaus.org/</td>
    		</tr>
    	</tbody>
    </table>
</div>

line00
line01<span id="span0">span0</span>
line02<div id="div1">
line03    <span id="span1">span1</span>
line04    <div id="div1_1">
line05        <span id="span1">span2</span>
line06        <div id="div1_1_1">
line07            <span id="span1">span3</span>
line08        </div>
line09        <span id="span4">span4</span>
line10        <div id="div1_1_2">
line11            <span id="span5">span5</span>
line12            <div id="div1_1_2_1">
line13                <span id="span6">span6</span>
line14            </div>
line15            <span id="span7">span7</span>
line16            <div id="div1_1_2_2">
line17                <span id="span8">span8</span>
line18            </div>
line19            <span id="span9">span9</span>
line20        </div>
line21        <span id="span10">span10</span>
line22    </div>
line23    <span id="span11">span11</span>
line24    <div id="div1_2">
line25        <span id="span12">span12</span>
line26        <div id="div1_2_1">
line27            <span id="span13">span13</span>
line28        </div>
line29        <span id="span14">span14</span>
line20        <div id="div1_2_2">
line31            <span id="span15">span15</span>
line32        </div>
line33        <span id="span16">span16</span>
line34    </div>
line35    <span id="span17">span17</span>
line36</div>
line37<span id="span18">span18</span>
line38

<script language="JavaScript" type="text/javascript"><!--
function test_document_getFirstElementByClassName() {
    assertEquals(null, document.getFirstElementByClassName("unexists"));
    assertEquals($("tableContainer"), document.getFirstElementByClassName("tables"));
    assertEquals($("table1"), document.getFirstElementByClassName("matrix"));
    assertEquals($("table1_head_id"  ), document.getFirstElementByClassName("col_id"  , $("table1")));
    assertEquals($("table1_head_name"), document.getFirstElementByClassName("col_name", $("table1")));
    assertEquals($("table1_head_url" ), document.getFirstElementByClassName("col_url" , $("table1")));
    assertEquals($("table1_head_id"  ), document.getFirstElementByClassName("col_id"  , $("table1_head_row")));
    assertEquals($("table1_head_name"), document.getFirstElementByClassName("col_name", $("table1_head_row")));
    assertEquals($("table1_head_url" ), document.getFirstElementByClassName("col_url" , $("table1_head_row")));
    assertEquals($("table1_row1_id"  ), document.getFirstElementByClassName("col_id"  , $("table1_body")));
    assertEquals($("table1_row1_name"), document.getFirstElementByClassName("col_name", $("table1_body")));
    assertEquals($("table1_row1_url" ), document.getFirstElementByClassName("col_url" , $("table1_body")));
    assertEquals($("table1_row1_id"  ), document.getFirstElementByClassName("col_id"  , $("table1_row1")));
    assertEquals($("table1_row1_name"), document.getFirstElementByClassName("col_name", $("table1_row1")));
    assertEquals($("table1_row1_url" ), document.getFirstElementByClassName("col_url" , $("table1_row1")));
    assertEquals($("table1_row2_id"  ), document.getFirstElementByClassName("col_id"  , $("table1_row2")));
    assertEquals($("table1_row2_name"), document.getFirstElementByClassName("col_name", $("table1_row2")));
    assertEquals($("table1_row2_url" ), document.getFirstElementByClassName("col_url" , $("table1_row2")));
}

function test_Object_extend() {
    var f = function(){return true;};
    var obj1 = {};
    var obj2 = Object.extend(obj1, {"a":1, "b":2, "foo": f});
    assertEquals(obj1, obj2);
    assertAttributes({"a":1, "b":2, "foo": f}, obj1);
    assertAttributes(obj1, obj2);
    Object.extend(obj1, {"a":10, "c":100});
    assertAttributes({"a":10, "b":2, "c":100, "foo": f}, obj1);
}

function test_Object_fill() {
    var f = function(){return true;};
    var obj1 = {"a":1, "b":2, "foo": f};
    Object.fill(obj1, {"a":10, "c":100});
    assertAttributes({"a":1, "b":2, "c":100, "foo": f}, obj1);
}

function test_Object_extendProperties() {
    var f = function(){return true;};
    var obj1 = {"a":1, "b":2, "foo": f};
    var obj2 = Object.fill({}, obj1);
    assertAttributes({"a":1, "b":2}, obj2);
}

function test_Enumerable_to_object() {
    var array = [
        {"id": 1, name: "foo", "switch":true},
        {"id": 2, name: "bar", "switch":false},
        {"id": 3, name: "baz", "switch":true}
    ];
    var obj1 = array.to_object(function(value, index) {
        if (!value["switch"])
            return null;
        return [value.name, value["id"]];
    });
    assertAttributes({"foo":1, "baz":3}, obj1);
    
    var obj2 = array.to_object(function(value, index) {
        if (!value["switch"])
            return null;
        return {"key":value.name, "value":value["id"]};
    });
    assertAttributes({"foo":1, "baz":3}, obj2);
}

function test_Array_clone() {
    var array1 = [1, "2", 3, "four", "five"];
    var array2 = array1.clone();
    assertTrue(array1 != array2);
    assertArray(array1, array2);
}

function test_Array_remove() {
    var array1 = [1, "2", 3, "four", "five"];
    assertEquals(3, array1.remove("four"));
    assertEquals(4, array1.length);
    assertEquals(2, array1.remove(3));
    assertEquals(3, array1.length);
    assertEquals(-1, array1.remove(100));
    assertEquals(3, array1.length);
}
function test_Array_contains() {
    var array1 = [1, "2", 3, "four", "five"];
    assertEquals(false, array1.contains(null));
    assertEquals(false, array1.contains(""));
    assertEquals(true, array1.contains("2"));
    assertEquals(true, array1.contains("3"));
    assertEquals(true, array1.contains(3));
}
function test_Array_containsAllOf() {
    var array = [1, "2", 3, "four", "five"];
    assertEquals(false, array.containsAllOf(null));
    assertEquals(true, array.containsAllOf(1,2,3));
    assertEquals(false, array.containsAllOf(1,2,3,4));
    assertEquals(true, array.containsAllOf("1","2","3"));
    assertEquals(true, array.containsAllOf("four","1"));
    assertEquals(false, array.containsAllOf("four","one"));
    
    assertEquals(false, array.containsAllOf([null]));
    assertEquals(true, array.containsAllOf([1,2,3]));
    assertEquals(false, array.containsAllOf([1,2,3,4]));
    assertEquals(true, array.containsAllOf(["1","2","3"]));
    assertEquals(true, array.containsAllOf(["four","1"]));
    assertEquals(false, array.containsAllOf(["four","one"]));

    array = [1, "2", 3, null, "four", "five"];
    assertEquals(false, array.containsAllOf(""));
    assertEquals(true, array.containsAllOf(null));
    assertEquals(true, array.containsAllOf(1,2,3,null));
    assertEquals(true, array.containsAllOf("1","2","3"));
    assertEquals(true, array.containsAllOf("four","1",null));
    assertEquals(false, array.containsAllOf("four","one"));

    array = [1, "2", 3, null, "four", "", "five"];
    assertEquals(true, array.containsAllOf(""));
    assertEquals(true, array.containsAllOf(null, ""));
    assertEquals(true, array.containsAllOf(1,2,3,null));
    assertEquals(true, array.containsAllOf("1","2","3", ""));
    assertEquals(true, array.containsAllOf("four","1",null));
    assertEquals(false, array.containsAllOf("four","one", ""));
}
function test_Array_containsOneOf() {
    var array = [1, "2", 3, "four", "five"];
    assertEquals(false, array.containsOneOf(null));
    assertEquals(true, array.containsOneOf(1,2,3));
    assertEquals(true, array.containsOneOf("1","2","3"));
    assertEquals(true, array.containsOneOf("four","1"));
    assertEquals(true, array.containsOneOf("four","one"));
    assertEquals(false, array.containsOneOf("six"));
    assertEquals(false, array.containsOneOf("six","seven","nine"));
    
    assertEquals(false, array.containsOneOf([null]));
    assertEquals(true, array.containsOneOf([1,2,3]));
    assertEquals(true, array.containsOneOf(["1","2","3"]));
    assertEquals(true, array.containsOneOf(["four","1"]));
    assertEquals(true, array.containsOneOf(["four","one"]));
    assertEquals(false, array.containsOneOf(["six"]));
    assertEquals(false, array.containsOneOf(["six","seven","nine"]));

    array = [1, "2", 3, null, "four", "five"];
    assertEquals(false, array.containsOneOf(""));
    assertEquals(true, array.containsOneOf(null));
    assertEquals(true, array.containsOneOf(1,2,3,null));
    assertEquals(true, array.containsOneOf("1","2","3"));
    assertEquals(true, array.containsOneOf("four","1",null));
    assertEquals(true, array.containsOneOf("four","one"));
    assertEquals(false, array.containsOneOf("six"));
    assertEquals(false, array.containsOneOf("six","seven","nine"));

    array = [1, "2", 3, null, "four", "", "five"];
    assertEquals(true, array.containsOneOf(""));
    assertEquals(true, array.containsOneOf(null, ""));
    assertEquals(true, array.containsOneOf(1,2,3,null));
    assertEquals(true, array.containsOneOf("1","2","3", ""));
    assertEquals(true, array.containsOneOf("four","1",null));
    assertEquals(true, array.containsOneOf("four","one", ""));
    assertEquals(false, array.containsOneOf("six"));
    assertEquals(false, array.containsOneOf("six","seven","nine"));
}
function test_Array_intersect() {
    var array = [1, "2", 3, null, "four", "", "five"];
    assertArray("intersect1", [1,"2",3], array.intersect([1,"2",3]));
    assertArray("intersect2", [1,"2",3], array.intersect([3,2,1]));
    assertArray("intersect3", ["2",null], array.intersect([null,"2"]));
    assertArray("intersect4", ["four","","five"], array.intersect(["","three","four","five","six"]));
    assertArray("intersect5", [3], array.intersect([1,2,3,4,5],[1,3,5],[3,6,9,12]));
    assertArray("intersect6", [], array.intersect([1,2,3,4,5],[1,3,5],[2,4,6]));
}


function test_String_startWith() {
   assertEquals(true , "abc".startWith("a"));
   assertEquals(false, "abc".startWith("b"));
   assertEquals(false, "abc".startWith("c"));
   assertEquals(true , "abc".startWith("ab"));
   assertEquals(false, "abc".startWith("bc"));
   assertEquals(true , "abc".startWith("abc"));
   assertEquals(false, "abc".startWith("abcd"));
   assertEquals(false, "abc".startWith(null));
   assertEquals(false, "abc".startWith(""));
   assertEquals(false, "abc".startWith("d"));
   assertEquals(false, "abc".startWith("de"));
   assertEquals(false, "abc".startWith("def"));
}

function test_String_endWith() {
   assertEquals(false, "abc".endWith("a"));
   assertEquals(false, "abc".endWith("b"));
   assertEquals(true , "abc".endWith("c"));
   assertEquals(false, "abc".endWith("ab"));
   assertEquals(true , "abc".endWith("bc"));
   assertEquals(true , "abc".endWith("abc"));
   assertEquals(false, "abc".endWith("abcd"));
   assertEquals(false, "abc".endWith(null));
   assertEquals(false, "abc".endWith(""));
   assertEquals(false, "abc".endWith("d"));
   assertEquals(false, "abc".endWith("de"));
   assertEquals(false, "abc".endWith("def"));
}

var words_pair = [
    {s: "book", p:"books"},
    {s: "person", p:"persons"},
    {s: "child", p:"children"},
    {s: "city", p:"cities"},
    {s: "leaf", p:"leaves"},
    {s: "knife", p:"knives"},
    {s: "boss", p:"bosses"},
    {s: "bus", p:"buses"},
    {s: "branch", p:"branches"},
    {s: "dish", p:"dishes"},
    {s: "box", p:"boxes"},
    {s: "manifesto", p:"manifestoes"}
];

function test_String_singularize() {
   words_pair.each( function(pair) {
     assertEquals(pair.s, pair.p.singularize());
   }); 
}
function test_String_pluralize() {
   words_pair.each( function(pair) {
     assertEquals(pair.p, pair.s.pluralize());
   }); 
}
function test_String_toNumeric() {
    assertEquals("", "".toNumeric());
    assertEquals("", "abc".toNumeric());
    assertEquals("0", "0abc".toNumeric());
    assertEquals("01", "0abc1".toNumeric());
    assertEquals("01.5", "0abc1.5".toNumeric());
    assertEquals("-01.5", "-0abc1.5".toNumeric());
    assertEquals("-01.5.8", "-0abc1.5_[.8]".toNumeric());
}
function test_Number_commify() {
    assertEquals("0", (0).commify());
    assertEquals("1", (1).commify());
    assertEquals("12", (12).commify());
    assertEquals("123", (123).commify());
    assertEquals("1,234", (1234).commify());
    assertEquals("12,345", (12345).commify());
    assertEquals("123,456", (123456).commify());
    assertEquals("1,234,567", (1234567).commify());
    assertEquals("12,345,678", (12345678).commify());
    assertEquals("-1", (-1).commify());
    assertEquals("-12", (-12).commify());
    assertEquals("-123", (-123).commify());
    assertEquals("-1,234", (-1234).commify());
    assertEquals("-12,345", (-12345).commify());
    assertEquals("-123,456", (-123456).commify());
    assertEquals("-1,234,567", (-1234567).commify());
    assertEquals("-12,345,678", (-12345678).commify());
    //
    assertEquals("0.1", (0.1).commify());
    assertEquals("0.12345", (0.12345).commify());
    assertEquals("123.12345", (123.12345).commify());
    assertEquals("12,345.12345", (12345.12345).commify());
    assertEquals("-0.1", (-0.1).commify());
    assertEquals("-0.12345", (-0.12345).commify());
    assertEquals("-123.12345", (-123.12345).commify());
    assertEquals("-12,345.12345", (-12345.12345).commify());
}

function test_Object_Predicate_join() {
    assertEquals(true, Object.Predicate.acceptAll(null));
    assertEquals(false, Object.Predicate.denyAll(null));
    var f = Object.Predicate.not(Object.Predicate.acceptAll);
    assertEquals(false, f(null));
    f = Object.Predicate.not(Object.Predicate.denyAll);
    assertEquals(true, f(null));
    f = Object.Predicate.and(Object.Predicate.acceptAll, Object.Predicate.denyAll);
    assertEquals(false, f(null));
    f = Object.Predicate.or(Object.Predicate.acceptAll, Object.Predicate.denyAll);
    assertEquals(true, f(null));
}

function test_Element_Finder() {
    assertElement($("div1"), Element.Finder.first($("span0"), Element.Iteration.nextSibling));
    assertElement($("span1"), Element.Finder.first($("div1"), Element.Iteration.firstChild));

}

--></script>

line00
line01<span id="span0">span0</span>
line02<div id="div1">
line03    <span id="span1">span1</span>
line04    <div id="div1_1">
line05        <span id="span1">span2</span>
line06        <div id="div1_1_1">
line07            <span id="span1">span3</span>
line08        </div>
line09        <span id="span4">span4</span>
line10        <div id="div1_1_2">
line11            <span id="span5">span5</span>
line12            <div id="div1_1_2_1">
line13                <span id="span6">span6</span>
line14            </div>
line15            <span id="span7">span7</span>
line16            <div id="div1_1_2_2">
line17                <span id="span8">span8</span>
line18            </div>
line19            <span id="span9">span9</span>
line20        </div>
line21        <span id="span10">span10</span>
line22    </div>
line23    <span id="span11">span11</span>
line24    <div id="div1_2">
line25        <span id="span12">span12</span>
line26        <div id="div1_2_1">
line27            <span id="span13">span13</span>
line28        </div>
line29        <span id="span14">span14</span>
line20        <div id="div1_2_2">
line31            <span id="span15">span15</span>
line32        </div>
line33        <span id="span16">span16</span>
line34    </div>
line35    <span id="span17">span17</span>
line36</div>
line37<span id="span18">span18</span>
line38
</body>
</html>
