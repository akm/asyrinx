<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>brownie-calendar</title>
<script language="javascript" type="text/javascript" src="../../lib/prototype.js" ></script>
<script language="javascript" type="text/javascript" src="../../src/logger.js" ></script>
<script language="javascript" type="text/javascript" src="../../src/prototype_ext.js" ></script>
<script language="javascript" type="text/javascript" src="../../src/date.js" ></script>
<script language="javascript" type="text/javascript" src="../../src/calendar.js" ></script>
</head>
<body>

<div>
  <div style="float:left;margin:10px;">
	Current: <input type="text" id="simpleCalendarField1"/><br/>
	Selected: <input type="text" id="simpleCalendarField2"/><br/>
	<table>
	   <tr><td>[Ctrl+LEFT]</td><td>prev date</td></tr>
	   <tr><td>[Ctrl+RIGHT]</td><td>next date</td></tr>
	   <tr><td>[Ctrl+UP]</td><td>prev week</td></tr>
	   <tr><td>[Ctrl+DOWN]</td><td>next week</td></tr>
	   <tr><td>[PAGE_UP]</td><td>prev month</td></tr>
	   <tr><td>[PAGE_DOWN]</td><td>next month</td></tr>
	   <tr><td>[Ctrl+PAGE_UP]</td><td>prev year</td></tr>
	   <tr><td>[Ctrl+PAGE_DOWN]</td><td>next year</td></tr>
	</table>
  </div>
  <div id="calendarDiv1" style="float:left;margin:10px;"></div>
  <div style="clear:left;"></div>
</div>

<script language="javascript" type="text/javascript" ><!--
Logger.setActiveOnLoad(true);

var currentModel = new Date.Calendar.Model();
var selectedModel = new Date.Calendar.Model();
new Date.Calendar.KeyController($("simpleCalendarField1"), currentModel);
new Date.Calendar.KeyController($("simpleCalendarField2"), selectedModel);
var view = new Date.Calendar.View( $("calendarDiv1"), 
    {"currentModel":currentModel, "selectedModel":selectedModel} );

new Date.Calendar.ViewController(view);
--></script>

PullDownCalendar: <input type="text" id="calendarField1" value="2005/6/1"/>

<script language="javascript" type="text/javascript" ><!--

Date.Calendar.PullDown = Class.create();
Date.Calendar.PullDown.DefaultPaneStyle ={
	"width": "160px",
	"max-height": "250px",
	"overflow": "hidden"
};
Date.Calendar.PullDown.DefaultPaneOptions ={
	"style": Date.Calendar.PullDown.DefaultPaneStyle
};
Date.Calendar.PullDown.DefaultOptions ={
    activateSoon: true,
    hideOnPaneClick: false,
    toggleOnDblClick: true,
	pane: Date.Calendar.PullDown.DefaultPaneOptions
}
Date.Calendar.PullDown.Methods = {};
Object.extend(Date.Calendar.PullDown.Methods, HTMLInputElement.PullDown.Methods);
Object.extend(Date.Calendar.PullDown.Methods, {
    initialize: function(field, options) {
        this.field = $(field);
        options = Object.fill( options || {}, Date.Calendar.PullDown.DefaultOptions);
        HTMLInputElement.PullDown.Methods.initialize.apply(this, [options]);
        this.eraGroup = this.options["eraGroup"]||Date.EraGroup.DEFAULT;
	    var d = this.eraGroup.parse(this.field.value);
	    this.currentModel = new Date.Calendar.Model(d, this.eraGroup);
	    this.selectedModel = new Date.Calendar.Model(d, this.eraGroup);
        this.fieldKeyController = new Date.Calendar.KeyController(this.field, this.selectedModel);
        if (this.options.activateSoon)
            this.activate();
    },
	createPane: function() {
		var result = HTMLInputElement.PullDown.Methods.createPane.apply(this, arguments);
        this.view = new Date.Calendar.View(result, 
            {"currentModel":this.currentModel, "selectedModel":this.selectedModel} );
        new Date.Calendar.ViewController(this.view);
		return result;
	},
    activate: function() {
        var visibleHandlingMatcher = this.matchWhenVisible.bind(this);
        Event.observe(this.field, "blur", this.hide.bindAsEventListener(this) , false);
        if (this.options.toggleOnDblClick) 
            Event.observe(this.field, "dblclick", this.toggle.bindAsEventListener(this) , false);
    },
    matchWhenVisible: function(action, event, keyCode, keyHandler) {
        return (this.visible && keyHandler.matchAction(action, event, keyCode));
    },
    hide: function(event) {
        HTMLInputElement.PullDown.Methods.hide.apply(this, arguments);
    },
    show: function(event) {
        HTMLInputElement.PullDown.Methods.show.apply(this, arguments);
    }
	
});
Object.extend(Date.Calendar.PullDown.prototype, Date.Calendar.PullDown.Methods);

new Date.Calendar.PullDown($("calendarField1"));

--></script>





</body>
</html>
